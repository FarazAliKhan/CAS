@page
@using Microsoft.AspNetCore.Localization
@using Microsoft.AspNetCore.Mvc.Localization
@inject IStringLocalizer<CreateModel> localizer
@inject IHtmlLocalizer<CreateModel> htmlLocalizer
@model CreateModel
@{
    ViewData["Title"] = "CAS";
    if (HttpContext.Request.Query["culture"] == "fr")
    {
        CultureInfo.CurrentCulture = new CultureInfo("fr");
        CultureInfo.CurrentUICulture = new CultureInfo("fr");
        Response.Cookies.Append(
            CookieRequestCultureProvider.DefaultCookieName,
            CookieRequestCultureProvider.MakeCookieValue(new RequestCulture(CultureInfo.CurrentCulture)),
            new CookieOptions { Expires = DateTimeOffset.UtcNow.AddYears(1) }
        );
    }
    else if (HttpContext.Request.Query["culture"] == "en")
    {
        CultureInfo.CurrentCulture = new CultureInfo("en");
        CultureInfo.CurrentUICulture = new CultureInfo("en");
        Response.Cookies.Append(
            CookieRequestCultureProvider.DefaultCookieName,
            CookieRequestCultureProvider.MakeCookieValue(new RequestCulture(CultureInfo.CurrentCulture)),
            new CookieOptions { Expires = DateTimeOffset.UtcNow.AddYears(1) }
        );
    }

    var requestCultureFeature = HttpContext.Features.Get<IRequestCultureFeature>();
    var requestCulture = requestCultureFeature.RequestCulture;
    ViewData["Create"] = localizer["Create"];
    ViewData["Select"] = localizer["Select"];
    ViewData["Home"] = localizer["Home"];
}

<section>
    <div class="text-center"><h1>@localizer["Create"] CAS</h1></div>
    <div class="wb-frmvld">
        <form method="post" id="createForm">
            <details class="mrgn-tp-lg" open>
                    <summary>Module#1

                    </summary>
                    <section class="center">
                    @if (!ViewData.ModelState.IsValid)
                    {
                        @* <div class="alert alert-danger" role="alert">
                            <div class="error-color">
                                <p class="span-break"><span asp-validation-for="@Model.firstName" class="label label-danger"></span></p>
                                <p class="span-break"><span asp-validation-for="@Model.lastName" class="label label-danger"></span></p>
                                <p class="span-break"><span asp-validation-for="@Model.dob" class="label label-danger"></span></p>
                            </div>
                        </div> *@

                        <div class="error-color">
                            <div class="alert alert-danger" role="alert">
                                <br />
                                @Html.ValidationSummary(false, "Please correct the following errors: ")
                            </div>
                        </div> 
                    }
                    <fieldset>
                        <div class="form-group">
                            <label for="firstName"><span class="field-name">First name</span></label>
                            <input class="form-control" id="firstName" name="firstName" type="text" asp-for="@Model.firstName" autocomplete="firstName" data-rule-minlength="2">
                            <span asp-validation-for="@Model.firstName" class="label label-danger"></span>
                        </div>
                        <div class="form-group">
                            <label for="lastName"><span class="field-name">Last name</span></label>
                            <input class="form-control" id="lastName" name="lastName" type="text" asp-for="@Model.lastName" autocomplete="lastName" data-rule-minlength="2">
                            <span asp-validation-for="@Model.lastName" class="label label-danger"></span>
                        </div>
                        <div class="form-group">
                            <label for="dob"><span class="field-name">Date of Birth</span><span class="datepicker-format"> (<abbr title="Four digits year, dash, two digits month, dash, two digits day">YYYY-MM-DD</abbr>)</span></label>
                            <input class="form-control" id="dob" name="dob" type="date" data-rule-dateISO="true"  asp-for="@Model.dob"/>
                            <span asp-validation-for="@Model.dob" class="label label-danger"></span>
                        </div>
                    </fieldset>
                    </section>
                    <div>
                        <button class="btn btn-primary" type="submit">@localizer["Review"]</button>
                        <span>
                            <a class="btn btn-default" asp-page="./Select">@localizer["Back"]</a>
                        </span>
                    </div>

            </details>
        </form>
    </div>
</section>
